if(typeof jQuery=="undefined"){throw new Error("El plugin carta_wp necesita la librería jQuery para funcionar.")}(function($){"use strict";var TJ_CartaWp=function(element,options,callback){this.element=null;this.options=null;this.zoomfull="\x3c!--  INICIO - Maquetación al pinchar sobre un item --\x3e\n"+'<div class="card shadow-lg cwp-zoom" id="">\n'+'    <img src="" class="card-img-top cwp-main-image" alt="...">\n'+'    <div class="card-body">\n'+'        <h3 class="card-title cwp-title"></h3>\n'+'        <p class="card-text text-secondary m-1 cwp-description"></p>\n'+'        <h6 class="card-text cwp-price mt-3"></h6>\n'+'        <ul class="list-inline m-0 cwp-alergenos">\n'+"        </ul>\n"+"    </div>\n"+"</div>\n"+"\x3c!--  FIN - Maquetación al pinchar sobre un item --\x3e";this.overdark='<div class="cwp-fondo-zoom"></div>';this.init(element,options,callback)};TJ_CartaWp.Defaults={filter:".cwp-categorias li",item:".cwp-item",animation:"scale",callback:null};TJ_CartaWp.prototype.init=function(element,options,callback){this.$element=$(element);this.options=this.getOptions(options);this.filtro(this.options);$("body").prepend(this.zoomfull);$("body").prepend(this.overdark);this.zoom();this.$element.children().addClass(this.options.item.replace(".",""));if(typeof callback=="function"){callback.call(this)}if(typeof this.options.callback=="function"){this.options.callback.call(this)}};TJ_CartaWp.prototype.getDefaults=function(){return TJ_CartaWp.Defaults};TJ_CartaWp.prototype.getOptions=function(options){return $.extend({},this.getDefaults(),options)};TJ_CartaWp.prototype.filtro=function(options){$(document).on("click",options.filter,function(){var $this=$(this);var filtro=$this.attr("data-filter");var $item=$(options.item);if(filtro=="todo"){$this.addClass("cwp-categoria-activa").siblings().removeClass("cwp-categoria-activa");$item.fadeIn(600)}else{if(!$this.hasClass("cwp-categoria-activa")){$this.addClass("cwp-categoria-activa").siblings().removeClass("cwp-categoria-activa");$item.fadeOut(300);setTimeout(function(){console.log(filtro);$('[data-f *= "'+filtro+'"]').fadeIn(300)},300)}}})};TJ_CartaWp.prototype.zoom=function(){var $overdark=$(".cwp-fondo-zoom");var $contenedor_zoom=$(".cwp-zoom");var $imagen_pricipal=$(".cwp-main-image");$(document).on("click",".cwp-single-container",function(){var $contenedor_pequeno=$(this);var src=$contenedor_pequeno.find(".cwp-main-image").attr("src");var $titulo=$contenedor_pequeno.find(".card-title").text();if($contenedor_pequeno.find(".read-more").length!=0){var $descripcion=$contenedor_pequeno.find(".show-string").text()+$contenedor_pequeno.find(".hide-string").text()}else{var $descripcion=$contenedor_pequeno.find(".cwp-description").text()}var $precio=$contenedor_pequeno.find(".cwp-price").text();var $alergenos=$contenedor_pequeno.find(".cwp-alerg-icon");$contenedor_zoom.fadeIn();$overdark.fadeIn();$contenedor_zoom.children(".cwp-main-image").attr("src",src);$contenedor_zoom.find(".card-title").text($titulo);$contenedor_zoom.find(".cwp-description").text($descripcion);$contenedor_zoom.find(".cwp-price").text($precio);for(const $alergeno of $alergenos){$contenedor_zoom.find("ul.cwp-alergenos").append("<li class='list-inline-item'><img src="+$alergeno.currentSrc+" alt='"+$alergeno.alt+"'></li>")}});$.merge($overdark,$contenedor_zoom).on("click",function(){$overdark.fadeOut();$contenedor_zoom.fadeOut();$contenedor_zoom.find("ul.cwp-alergenos").html("")})};$(document).ready(function(){var maxLength=50;$(".show-read-more").each(function(){var myStr=$(this).text();if($.trim(myStr).length>maxLength){var newStr=myStr.substring(0,maxLength);var removedStr=myStr.substring(maxLength,$.trim(myStr).length);$(this).empty().html("<span class='show-string'>"+newStr+"</span>");$(this).append('<span class="read-more text-danger"> ...más</span>');$(this).append('<span class="d-none hide-string">'+removedStr+"</span>")}})});var Plugin=function(options,callback){return this.each(function(){options=typeof options=="object"&&options;var data=new TJ_CartaWp(this,options,callback)})};var old=$.fn.filtro_cwp;$.fn.filtro_cwp=Plugin;$.fn.filtro_cwp.Constructor=TJ_CartaWp;$.fn.filtro_cwp.noConflict=function(){$.fn.filtro_cwp=old}})(jQuery);